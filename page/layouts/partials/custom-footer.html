<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script>(function () {
    const config = {
        indexName: 'contao',
        apiKey: '2cc3dc0f193fe88f8176ccec1d413c4a',
        container: '.algolia-searchbox',
        appId: 'KDZKB9K935',
        searchParameters: { 'facetFilters': ['lang:{{ .Page.Language | default "en" }}'] },
        placeholder: '{{T "Search-placeholder"}}',
        translations: {
            button: {
                buttonText: '{{T "Search-placeholder"}}',
                buttonAriaLabel: '{{T "Search-placeholder"}}',
            }
        }
    };

    let executeClick = false;

    if (URLSearchParams !== undefined) {
        const params = new URLSearchParams(location.search);

        if (params.has('search')) {
            config.initialQuery = params.get('search');
            executeClick = true;
        }
    }

    docsearch(config);

    if (executeClick) {
        const button = document.querySelector('.DocSearch-Button');

        if (null !== button) {
            button.click();
        }
    }
})();
</script>
